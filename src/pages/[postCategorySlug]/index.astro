---
import { StrapiPostEndpoints } from '../../lib/strapi';
import ArticleListing from '../../components/blog/ArticleListing.astro';

export const prerender = false;

const { postCategorySlug } = Astro.params;

if (!postCategorySlug) {
  return Astro.redirect('/404');
}

const response = await StrapiPostEndpoints.getCategoryPosts(Astro.locals, postCategorySlug, 1);

if (!response.data.length) {
  return Astro.redirect('/404');
}
---

<ArticleListing postsResponse={response} />
